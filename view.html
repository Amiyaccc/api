<!DOCTYPE html>
<html>
<head>
    <title>IPè®°å½•æŸ¥çœ‹å™¨</title>
    <meta charset="utf-8">
    <style>
        body { font-family: Microsoft YaHei, sans-serif; padding: 20px; }
        .è®°å½• { border: 1px solid #ddd; padding: 15px; margin: 10px 0; background: #f9f9f9; }
        .IP { color: #c00; font-weight: bold; }
        .æ—¶é—´ { color: #666; font-size: 14px; }
    </style>
</head>
<body>
    <h1>ğŸ“Š IPè®¿é—®è®°å½•</h1>
    <div id="è®°å½•åˆ—è¡¨">æ­£åœ¨åŠ è½½...</div>
    
    <script>
        const é…ç½® = {
            TOKEN: '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',
            ç”¨æˆ·: 'amiyaccc',
            ä»“åº“: 'api',
            è®®é¢˜å·: 1
        };
        
        async function åŠ è½½è®°å½•() {
            try {
                const å“åº” = await fetch(
                    `https://api.github.com/repos/${é…ç½®.ç”¨æˆ·}/${é…ç½®.ä»“åº“}/issues/${é…ç½®.è®®é¢˜å·}/comments`,
                    {
                        headers: {
                            'Authorization': `token ${é…ç½®.TOKEN}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );
                
                const æ‰€æœ‰è¯„è®º = await å“åº”.json();
                const å®¹å™¨ = document.getElementById('è®°å½•åˆ—è¡¨');
                
                // æ£€æŸ¥è¿”å›çš„æ˜¯å¦æ˜¯æ•°ç»„
                if (!Array.isArray(æ‰€æœ‰è¯„è®º)) {
                    throw new Error('APIè¿”å›çš„ä¸æ˜¯æ•°ç»„: ' + JSON.stringify(æ‰€æœ‰è¯„è®º));
                }
                
                // æ¸…ç©ºå®¹å™¨
                å®¹å™¨.innerHTML = '';
                
                // ä½¿ç”¨slice()åˆ›å»ºå‰¯æœ¬å†reverseï¼Œæˆ–è€…ä½¿ç”¨forå¾ªç¯åå‘éå†
                const è¯„è®ºå‰¯æœ¬ = [...æ‰€æœ‰è¯„è®º]; // åˆ›å»ºå‰¯æœ¬
                è¯„è®ºå‰¯æœ¬.reverse().forEach(è¯„è®º => {
                    const div = document.createElement('div');
                    div.className = 'è®°å½•';
                    div.innerHTML = è¯„è®º.body.replace(/\n/g, '<br>');
                    å®¹å™¨.appendChild(div);
                });
                
                // æˆ–è€…ä½¿ç”¨forå¾ªç¯åå‘éå†ï¼ˆä¸ä¼šä¿®æ”¹åŸæ•°ç»„ï¼‰
                /*
                for (let i = æ‰€æœ‰è¯„è®º.length - 1; i >= 0; i--) {
                    const è¯„è®º = æ‰€æœ‰è¯„è®º[i];
                    const div = document.createElement('div');
                    div.className = 'è®°å½•';
                    div.innerHTML = è¯„è®º.body.replace(/\n/g, '<br>');
                    å®¹å™¨.appendChild(div);
                }
                */
                
            } catch(é”™è¯¯) {
                document.getElementById('è®°å½•åˆ—è¡¨').innerHTML = 
                    `<p style="color:red">åŠ è½½å¤±è´¥ï¼š${é”™è¯¯.message}</p>`;
            }
        }
        
        åŠ è½½è®°å½•();
        // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°
        setInterval(åŠ è½½è®°å½•, 30000);
    </script>
</body>
</html>
